Date: 2026-01-28
Time spent: 8h

Summary:
- Refactored Zustand stores to feature-folder pattern (types/selectors/hooks/actions) with shared MMKV adapter.
- Updated all store consumers and fixed download queue regression (queue ref sync + added count).
- Updated Zustand guidance docs and validated usage patterns.
- Backend messages endpoint now deduplicates attachments per message by filename to avoid repeated files.
- Client attachment fetching collapses duplicates by filename before enqueueing downloads.
- Download queue enqueue adds filename-level dedup guard to prevent race-condition duplicates.
